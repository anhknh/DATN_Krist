<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krist | detail</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/all.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-thin.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-solid.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-regular.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-light.css">
    <link rel="stylesheet" href="/css/StyleHomePage.css">
    <link rel="stylesheet" href="/css/ProductDetail.css">
    <link rel="stylesheet" href="/css/StyleThuoctinh.css">
</head>
<body>
<div class="container-fluid g-0"></div>
<div class="header">
    <div style="display: flex;">
        <div style="flex: 1;">
            <div class="d-flex align-items-center">
                <img style="height: 36px; margin-right: 8px;" src="/img/logo.png" alt="logo">
                <p class="title d-inline p-0 m-0">
                    <a style="color: #000; text-decoration: none" href="/trang-chu">Krist</a>
                </p>
            </div>
        </div>
        <div style="flex: 2;">
            <nav class="navbar navbar-expand-lg navbar-light">
                <div class="container-fluid">
                    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                        <div class="navbar-nav" style="width: 100%; justify-content: space-between;">
                            <div>
                                <li class="nav-item">
                                    <a class="nav-link cl-black s-18" href="/trang-chu">Trang chủ</a>
                                </li>
                            </div>
                            <div>
                                <li class="nav-item dropdown">
                                    <a class="nav-link cl-black s-18 dropdown-toggle" href="#" id="navbarDropdown"
                                       role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        Danh mục
                                    </a>
                                    <ul class="dropdown-menu" style="width: 800px; left: -240px; top: 55px;"
                                        aria-labelledby="navbarDropdown">
                                        <div class="d-flex">
                                            <div class="text-center" style="flex: 1; border-right: 1px solid #000;">
                                                <p class="font-blod">Danh mục</p>
                                                <hr>
                                                <div class="p-2 hover-effect" th:each="item : ${listDanhMuc}">
                                                    <a th:if="${listDanhMuc.size() > 0}"
                                                       th:href="@{/danh-sach-san-pham(danhMucId=${item.id})}"
                                                       style="text-decoration: none ; color : black">
                                                        <span th:text="${item.getTenDanhMuc()}"></span></a>
                                                </div>
                                                <h5 th:unless="${listDanhMuc.size() > 0}" style="color: gray;">Hiện tại
                                                    không có danh mục nào</h5>

                                            </div>
                                            <div class="text-center" style="flex: 1; border-right: 1px solid #000;">
                                                <p class="font-blod">Cổ áo</p>
                                                <hr>
                                                <div class="p-2 hover-effect" th:each="item : ${listCoAo}">
                                                    <a th:if="${listCoAo.size() > 0}"

                                                       th:href="@{/danh-sach-san-pham(coAoId=${item.id})}"
                                                       style="text-decoration: none ; color : black"><span
                                                            th:text="${item.getKieuCoAo()}"></span></a>
                                                </div>
                                                <h5 th:unless="${listCoAo.size() > 0}" style="color: gray;">Hiện tại
                                                    không có cổ áo nào</h5>
                                            </div>
                                            <div class="text-center" style="flex: 1; border-right: 1px solid #000;">
                                                <p class="font-blod">Tay áo</p>
                                                <hr>
                                                <div th:if="${listTayAo.size() > 0}" class="p-2 hover-effect"
                                                     th:each="item : ${listTayAo}">
                                                    <a th:href="@{/danh-sach-san-pham(tayAoId=${item.id})}"
                                                       style="text-decoration: none ; color : black"><span
                                                            th:text="${item.getKieuTayAo()}"></span></a>
                                                </div>
                                                <h5 th:unless="${listTayAo.size() > 0}" style="color: gray;">Hiện tại
                                                    không có tay áo nào</h5>
                                            </div>
                                        </div>
                                    </ul>
                                </li>
                            </div>
                            <div>
                                <li class="nav-item">
                                    <a class="nav-link cl-black s-18" href="#">Về chúng tôi</a>
                                </li>
                            </div>
                            <div>
                                <li class="nav-item">
                                    <a class="nav-link cl-black s-18" href="#">Hoạt động</a>
                                </li>
                            </div>
                            <div>
                                <li class="nav-item">
                                    <a class="nav-link cl-black s-18" href="#">Liên hệ</a>
                                </li>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
        <div style="flex: 1;">
            <div class="header_right d-flex align-items-center justify-content-end" style="height: 100%;">
                <div>
                    <a class="cl-black" href="/danh-sach-san-pham"><i
                            class="fa-regular s-18 fa-magnifying-glass"></i></a>
                </div>
                <div style="margin: 0px 46px;">
                    <a class="cl-black" href="#" data-bs-toggle="modal" data-bs-target="#modal_cart"><i
                            class="fa-sharp s-18 fa-regular fa-heart"></i></a>
                </div>
                <div class="me-4 position-relative cart-container">
                    <a class="cl-black" href="/gio-hang-chi-tiet">
                        <i class="fa-regular s-18 fa-cart-minus"></i>
                        <!-- Hiển thị tổng số lượng -->
                        <span th:if="${totalCartItem > 0}"
                              th:text="${totalCartItem}" style="background-color: red"
                              class="badge badge-danger position-absolute top-0 start-100 translate-middle">
                            </span>
                    </a>
                    <!-- Popup cart -->
                    <div class="cart-popup position-absolute bg-white shadow p-3 display_none"
                         style=" width: 370px; right: -16px; top: 20px; z-index: 10;">
                        <div class="cart-popup-header">
                            <p class="modal-title" th:text="'Bạn có ' + ${totalCartItem} + ' sản phẩm trong giỏ hàng'">
                                Bạn có </p>
                        </div>
                        <div class="cart-popup-body">
                            <div class="cart_product_row" th:each="item : ${gioHangChiTietList}">
                                <div class="img_product_cart">
                                    <div th:style="|background: url('/img/${item.chiTietSanPham.anhSanPham}') no-repeat center / cover; width: 100%; height: 100%;|">
                                    </div>
                                </div>
                                <div class="product_cart">
                                    <!-- Tên sản phẩm -->
                                    <p th:text="${item.getChiTietSanPham().sanPham.tenSanPham}"></p>

                                    <!-- Màu sắc và kích thước -->
                                    <div class="product-info">
                                        <div>
                                            <span>Color:</span>
                                            <div class="color-indicator"
                                                 th:style="'background-color:' + ${item.getChiTietSanPham().mau.maMauSac}"></div>
                                        </div>
                                        <span>Size: <span
                                                th:text="${item.getChiTietSanPham().size.tenSize}"></span></span>
                                    </div>

                                    <!-- Giá tiền và số lượng -->
                                    <div class="price-quantity">
                                        <p th:text="'Giá: ' + ${convertMoney.formatCurrency(item.getChiTietSanPham().donGia)}"></p>
                                        <p th:text="'Số lượng: ' + ${item.soLuong}"></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="cart-popup-footer">
                            <div class="d-flex justify-content-between"
                                 style="border-top: 2px solid #F6F6F6; padding: 12px;">
                                <div style="font-size: 14px; font-weight: 500;">Tổng tiền</div>
                                <div style="font-size: 14px; font-weight: 500;"
                                     th:text="${convertMoney.formatCurrency(tongTien)}">
                                </div>
                            </div>
                            <a href="/gio-hang-chi-tiet" class="btn btn-dark w-100">Thanh toán</a>
                        </div>
                    </div>
                </div>
                <div style="margin-left: 14px" th:if="khachHang != null">
                    <a class="cl-black" href="/quan-ly/don-hang"><i class="fa-regular s-18 fa-user"></i></a>
                </div>
                <div th:if="khachHang == null">
                    <a href="/dang-nhap" class="btn btn-dark">Đăng nhập</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- breadcrumb -->
<div class="container" style="padding: 18px;">
    <nav style="--bs-breadcrumb-divider: '>'; line-height: 40px;" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item "><a href="./Home.html" class="nav_link">Trang chủ</a></li>
            <li class="breadcrumb-item "><a href="./Home.html" class="nav_link">Danh mục</a></li>
            <li class="breadcrumb-item "><a href="#" class="nav_link_active">Chi tiết sản phẩm</a></li>
        </ol>
    </nav>
</div>

<!-- content -->
<div class="container d-flex  justify-content-between" style="margin-bottom: 80px;">
    <div class="content_left"
         style="width: 512px; height: 548px; background-color: #F6F6F6; border-radius: 6px; margin-right: 10px;">
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
            <!-- Indicators -->
            <div class="carousel-indicators">
                <th:block th:each="image, indexStat : ${listCTSP}">
                    <button type="button"
                            data-bs-target="#carouselExampleIndicators"
                            th:data-bs-slide-to="${indexStat.index}"
                            th:classappend="${indexStat.index == 0} ? 'active'"
                            th:aria-label="'Slide ' + ${indexStat.index + 1}">
                    </button>
                </th:block>
            </div>

            <!-- Carousel Items -->
            <div class="carousel-inner" style="padding: 28px;">
                <th:block th:each="image, indexStat : ${listCTSP}">
                    <div class="carousel-item text-center" th:classappend="${indexStat.index == 0} ? 'active'">
                        <img th:src="'/img/' + ${image.anhSanPham}" style="width: 80%;" alt="Chi tiết sản phẩm">
                    </div>
                </th:block>
            </div>

            <!-- Controls -->
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                    data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                    data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

    </div>
    <div class="content_right" style="width: 512px; height: 548px; margin-right: 108px;">
        <div class="d-flex  justify-content-between align-items-center" style="margin-bottom: 12px;">
            <div>
                <h3 th:text="${sanPham.tenSanPham}"></h3>
            </div>
            <div>
                <p class="m-0"
                   style="padding: 4px 12px; font-size: 12px; font-weight: 500; border: 1px solid #E6E7E8; border-radius: 40px; display: inline-block; display: inline-block;">
                    Còn hàng</p>
            </div>
        </div>
        <div style="color: #5C5F6A;  display: inline-block; margin-bottom: 12px;">
            <p style="line-height: 24px; font-weight: 500; background-color: #F6F6F6; padding: 2px 16px; border-radius: 38px;font-size: 12px; display: inline-block; margin-right: 8px;">
                <i class="fa-solid fa-star" style="color: #FFD700"></i> <span
                    th:text="${dataUtils.tinhTongDiemDanhGia(listDanhGia) + ' — ' + listDanhGia.size() + ' đánh giá'}">
                4.2 — 54 đánh giá</span></p>

        </div>
        <div style="margin-bottom: 12px;">
            <h4 id="price-product"
                th:text="${dataUtils.formatCurrency(sanPham.getChiTietSanPham().get(0).getDonGia())}">150.000 VNĐ</h4>
        </div>
        <div style="margin-bottom: 18px;">
            <div>
                <p style="font-size: 12px; color: #5C5F6A; font-weight: 500; line-height: 24px; letter-spacing: 0.6px;">
                    Màu sắc hiện có</p>
            </div>
            <div>
                <!-- list_color -->
                <div class="form-check form-check-inline" style="padding: 0; margin-right: 12px;"
                     th:each="color, indexStat : ${ListColorProductDetail}">
                    <input class="form-check-input radio_color"
                           type="radio"
                           name="inlineRadioOptions"
                           th:id="'color'+${color.id}"
                           th:value="${color.id}"
                           style="display: none;"
                           th:checked="${indexStat.index == 0}">
                    <label class="form-check-label lable_radio_color "
                           th:classappend="${indexStat.index == 0} ? 'selected_radio_color' : ''"
                           th:for="'color'+${color.id}"
                           style="padding: 2px;">
                        <p th:style="'margin: 0; padding: 9px; border-radius: 50%; background-color: ' + ${color.maMauSac} + '; border: 1px solid #E6E7E8; cursor: pointer;'">
                        </p>
                    </label>
                </div>

            </div>
        </div>
        <div style="margin-bottom: 18px;">
            <div>
                <p style="font-size: 12px; color: #5C5F6A; font-weight: 500; line-height: 24px; letter-spacing: 0.6px;">
                    Kích cỡ</p>
            </div>
            <!-- list_size -->
            <div>
                <div class="form-check form-check-inline" style="padding: 0; margin-right: 12px;"
                     th:each="size, indexStat : ${ListSizeProductDetail}">
                    <input class="form-check-input radio_size" type="radio" name="size" th:id="'size'+${size.id}"
                           th:value="${size.id}"
                           style="display: none;" th:checked="${indexStat.index == 0}">
                    <label class="form-check-label lable_radio_size " th:for="'size'+${size.id}"
                           style="padding: 10px 16px; cursor: pointer;border-radius: 4px;">
                        <p style="margin: 0; padding: 0; font-size: 12px; font-weight: 500;"
                           th:text="${size.tenSize}"></p>
                    </label>
                </div>
            </div>
        </div>
        <div style="margin-bottom: 32px;">
            <div>
                <p style="font-size: 12px; color: #5C5F6A; font-weight: 500; line-height: 24px; letter-spacing: 0.6px;"
                   id="quantily-product" th:text="'Số lượng hiện có: ' + ${sanPham.getChiTietSanPham().get(0).soLuong}">
                    Số lượng</p>
            </div>
            <div class="product_cart">
                <div class="d-flex justify-content-between align-items-center"
                     style="padding: 8px 18px; border: 1px solid #E6E7E8; border-radius: 4px; width: 162px;">
                    <div class="btn_Subtrac" style="cursor: pointer;">
                        <button style="background-color: #fff; border: none;">&#8722;</button>
                    </div>
                    <div class="quantity_number">
                        1
                    </div>
                    <div class="btn_plus" style="cursor: pointer;">
                        <button style="background-color: #fff; border: none;">&#43;</button>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <div>
                <div style=" display: inline-block;">
                    <a th:href="@{/gio-hang/add}"
                       id="linkAdd"
                       style=" color: #fff; text-decoration: none; background-color: #000; font-size: 14px; font-weight: 500; border-radius: 4px; padding: 12px 68px; margin-right: 8px;">Thêm
                        vào giỏ hàng</a>
                </div>
                <div style="display: inline-block;">
                    <a href="#"
                       style="color: #000; text-decoration: none;border: 1px solid #E6E7E8; font-weight: 500; border-radius: 4px; padding: 10px 12px"><i
                            class="fa-regular fa-heart btn_whish_add" style=" font-size: 18px;"></i></a>
                </div>
            </div>
        </div>
        <div>
            <p style="text-transform: uppercase; font-size: 12px; font-weight: 500; color: #5C5F6A; margin: 0; padding: 22px 0px 0px 0px;">
                — Phí vận chuyển sẽ được tính dựa trên địa chỉ giao hàng</p>
        </div>
    </div>
</div>
<!-- tabs detail -->
<!-- detail_review -->
<div class="container d-flex  align-items-start" style="padding: 28px 16px; margin-bottom: 28px;">
    <!-- tab -->
    <div style="width: 248px; display: inline-block; margin-right: 56px;">
        <div class="slected_tab_detail" id="btn_detail"
             style="font-size: 14px; font-weight: 500; padding: 8px 140px 8px 12px; display: inline-block; margin-bottom: 12px; border-radius: 4px;">
            <i class="fa-solid fa-ellipsis" style="margin-right: 8px;"></i> Thông tin
        </div>
        <div class="non_select_tab_detail" id="btn_review"
             style="font-size: 14px; font-weight: 500; padding: 8px 140px 8px 12px; display: inline-block; margin-bottom: 12px; border-radius: 4px;">
            <i class="fa-regular fa-star" style="margin-right: 8px;"></i> Đánh giá
        </div>
    </div>
    <!-- view_detail -->
    <div class="display_block" id="view_detail" style=" width: 727px;margin-left: 28px;">
        <h5 style="margin-bottom: 18px;">Thông tin sản phẩm</h5>
        <p style="font-size: 14px; font-weight: 400; color: #5C5F6A;" th:text="${sanPham.moTa}">
        </p>
    </div>
    <!-- view_rivew -->
    <div class="display_none" id="view_review" style=" width: 727px;margin-left: 28px;">
        <h5 style="margin-bottom: 18px;">Đánh giá</h5>
        <div style="margin-bottom: 12px;">
            <h2 style="display: inline-block; margin-right: 12px;">
                <span th:text="${dataUtils.tinhTongDiemDanhGia(listDanhGia)}">4.2</span>
                <i class="fa-solid fa-star" style="color: #FFD700; font-size: 20px"></i>
            </h2>

            <p style="display: inline-block; color: #5C5F6A; font-size: 14px;"
               th:text="'— ' + ${listDanhGia.size()} + ' đánh giá'"> 54 đánh giá</p>
        </div>
        <hr style="margin-bottom: 18px;">
        <!-- row_review -->
        <div class="d-flex align-items-start justify-content-between" style="margin-bottom: 18px;padding-left: 8px;"
             th:each="danhGia : ${listDanhGia}">
            <div>
                <div class="d-inline-block mb-4 me-3"
                     style="background-color: #F0F1FF; width: 48px; height: 48px; border-radius: 50%; background-image: url('/img/khachHang.png'); background-size: cover">
                </div>
                <div class="d-inline-block" style="margin-right: 52px;">
                    <!-- Tên khách hàng -->
                    <p style="font-size: 14px; font-weight: 500; margin-bottom: 8px;" th:text="${danhGia.khachHang.tenKhachHang}">
                        Hoang Anh
                    </p>

                    <!-- Thông tin sản phẩm -->
                    <p style="font-size: 12px; font-weight: 500; color: #5C5F6A; margin: 0">
                        Sản phẩm:
                        <span th:text="${danhGia.hoaDonChiTiet.chiTietSanPham.sanPham.tenSanPham}">
                            Red Cotton Shirt
                        </span>,
                                Màu:
                                        <!-- Hình tròn màu -->
                                <span th:style="|background-color: ${danhGia.hoaDonChiTiet.chiTietSanPham.mau.maMauSac};
                                       display: inline-block;
                                       width: 14px;
                                       height: 14px;
                                       border-radius: 50%;
                                       margin-right: 4px;|">
                                </span>
                                <!-- Kích thước -->
                                Size:
                                <span th:text="${danhGia.hoaDonChiTiet.chiTietSanPham.size.tenSize}">
                                M
                        </span>
                    </p>

                    <!-- Ngày tạo -->
                    <p style="text-transform: uppercase; font-size: 12px; font-weight: 500; color: #5C5F6A; margin-bottom: 8px"
                       th:text="${#dates.format(danhGia.ngayTao, 'dd-MM-yyyy')}">
                        01-01-2024
                    </p>

                    <!-- Nội dung đánh giá -->
                    <p style="font-size: 14px; font-weight: 400; color: #5C5F6A;" th:text="${danhGia.noiDung}">
                        Sản phẩm rất tốt
                    </p>
                </div>


            </div>

            <div style="font-size: 12px;">
                <!-- Hiển thị số ngôi sao sáng -->
                <span th:each="i : ${#numbers.sequence(1, 5)}">
                    <i th:class="'fa-solid fa-star ' + ${danhGia.mucDoDanhGia >= i ? 'color-review' : ''}" ></i>
                </span>
            </div>
        </div>
        <div class="text-center" style="margin-top: 36px;">
            <div class="btn"  id="loadMoreBtn"
                 style="border: 1px solid #B6B7BC; font-size: 14px; font-weight: 500; margin-bottom: 28px; color: #5C5F6A;">
                Hiển thị thêm đánh giá
            </div>
        </div>
    </div>
</div>

<!-- footer -->
<div class="container-fluid d-flex align-items-center justify-content-evenly"
     style="padding: 40px 0 120px 0; margin-top: 80px; background-color: #000;">
    <div style="width: 272px; margin-right: 142px;">
        <div class="d-flex align-items-center" style="margin-bottom: 12px;">
            <div style="padding: 8px 14px; margin-right: 8px; border-radius: 5px; border: 1px solid #E6E7E8; background-color: #fff;">
                <img src="/img/logo.png" alt="logo">
            </div>
            <div>
                <div class="cl-white" style="font-size: 20px; font-weight: 600;">Krist</div>
            </div>
        </div>
        <p class="cl-white " style="font-size: 14px; margin-bottom: 28px;">Kết nối với chúng tôi qua các mạng xã hội</p>
        <div class="d-flex justify-content-between" style="padding-right: 60px;">
            <div>
                <i class="fa-brands fa-instagram cl-white " style="font-size: 20px;"></i>
            </div>
            <div>
                <i class="fa-brands fa-facebook cl-white " style="font-size: 20px;"></i>
            </div>
            <div>
                <i class="fa-brands fa-youtube cl-white " style="font-size: 20px;"></i>
            </div>
            <div>
                <i class="fa-brands fa-tiktok cl-white " style="font-size: 20px;"></i>
            </div>
            <div>
                <i class="fa-brands fa-twitter cl-white " style="font-size: 20px;"></i>
            </div>
        </div>
    </div>
    <div style="width: 484px; margin-right: 100px;">
        <div style=" margin-right: 48px; display: inline-block;">
            <p class="cl-white" style="font-size: 14px; font-weight: 700; margin-bottom: 40px;">Hỗ trợ</p>
            <p><a href="#" class="cl-white"
                  style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Câu hỏi thường
                gặp</a></p>
            <p><a href="#" class="cl-white"
                  style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Điều khoản sử
                dụng</a></p>
            <p><a href="#" class="cl-white"
                  style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Chính sách bảo
                mật</a></p>

        </div>
        <div style=" margin-right: 48px; display: inline-block;">
            <p class="cl-white" style="font-size: 14px; font-weight: 700; margin-bottom: 40px;">Công ty</p>
            <p><a href="#" class="cl-white"
                  style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Về chúng
                tôi</a></p>
            <p><a href="#" class="cl-white"
                  style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Kết nối</a></p>
            <p><a href="#" class="cl-white"
                  style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Chăm sóc khách
                hàng</a></p>

        </div>
        <div style=" margin-right: 48px; display: inline-block;">
            <p class="cl-white" style="font-size: 14px; font-weight: 700; margin-bottom: 40px;">Của hàng</p>
            <p><a href="#" class="cl-white"
                  style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Tài khoản</a>
            </p>
            <p><a href="#" class="cl-white"
                  style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Đặt hàng</a>
            </p>
            <p><a href="#" class="cl-white"
                  style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Giỏ hàng</a>
            </p>

        </div>
    </div>
    <div style="width: 272px;">
        <p class="cl-white" style="font-size: 14px; font-weight: 500; margin-bottom: 22px;">Các phương thức thanh
            toán</p>
        <div class="d-flex justify-content-between" style="padding-right: 60px;">
            <div>
                <i class="fa-brands fa-cc-mastercard cl-white" style="font-size: 20px;"></i>
            </div>
            <div>
                <i class="fa-brands fa-cc-visa cl-white" style="font-size: 20px;"></i>
            </div>
            <div>
                <i class="fa-brands fa-cc-amex cl-white" style="font-size: 20px;"></i>
            </div>
            <div>
                <i class="fa-brands fa-cc-paypal cl-white" style="font-size: 20px;"></i>
            </div>
        </div>
    </div>
</div>


<!-- modal_review -->
<div class="modal fade" id="modal_review" tabindex="-1" aria-labelledby="modal_reviewLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content" style="padding: 20px; width: 494px; height: 578px;">
            <div class="modal-header">
                <h5 class="modal-title" id="modal_reviewLabel">Write Review</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="InputEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="InputEmail">
                    </div>
                    <div class="mb-3">
                        <label for="InputFullName" class="form-label">Full name</label>
                        <input type="text" class="form-control" id="InputFullName">
                    </div>
                    <div class="mb-3">
                        <label for="reviewTextArea" class="form-label">Review</label>
                        <textarea class="form-control" id="reviewTextArea" style="height: 100px"></textarea>
                    </div>
                    <div class="mb-3">
                        <div class="form-check form-check-inline" style="padding: 0; margin-right: 12px;">
                            <input class="form-check-input" type="radio" name="poinReview" id="poinReview1" value="1"
                                   style="display: none;" checked>
                            <label class="form-check-label" for="poinReview1">
                                <i class="fa-solid fa-star number_star_review"
                                   style="font-size: 16px; cursor: pointer; color: #5C5F6A;"></i>
                            </label>
                        </div>
                        <div class="form-check form-check-inline" style="padding: 0; margin-right: 12px;">
                            <input class="form-check-input" type="radio" name="poinReview" id="poinReview2" value="2"
                                   style="display: none;">
                            <label class="form-check-label" for="poinReview2">
                                <i class="fa-regular fa-star number_star_review"
                                   style="font-size: 16px; cursor: pointer; color: #5C5F6A;"></i>
                            </label>
                        </div>
                        <div class="form-check form-check-inline" style="padding: 0; margin-right: 12px;">
                            <input class="form-check-input" type="radio" name="poinReview" id="poinReview3" value="3"
                                   style="display: none;">
                            <label class="form-check-label" for="poinReview3">
                                <i class="fa-regular fa-star number_star_review"
                                   style="font-size: 16px; cursor: pointer; color: #5C5F6A;"></i>
                            </label>
                        </div>
                        <div class="form-check form-check-inline" style="padding: 0; margin-right: 12px;">
                            <input class="form-check-input" type="radio" name="poinReview" id="poinReview4" value="4"
                                   style="display: none;">
                            <label class="form-check-label" for="poinReview4">
                                <i class="fa-regular fa-star number_star_review"
                                   style="font-size: 16px; cursor: pointer; color: #5C5F6A;"></i>
                            </label>
                        </div>
                        <div class="form-check form-check-inline" style="padding: 0; margin-right: 12px;">
                            <input class="form-check-input" type="radio" name="poinReview" id="poinReview5" value="5"
                                   style="display: none;">
                            <label class="form-check-label" for="poinReview5">
                                <i class="fa-regular fa-star number_star_review"
                                   style="font-size: 16px; cursor: pointer; color: #5C5F6A;"></i>
                            </label>
                        </div>
                    </div>
                    <div class="text-center" style="margin-top: 36px;">
                        <button type="submit" class="btn bg-black"
                                style="color: #fff; padding: 8px 68px; font-size: 14px;">Submit Your Review
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/ProductDetail.js"></script>

<script>
    $(document).ready(function () {
        // Sự kiện thay đổi màu sắc sản phẩm
        $('input[name="inlineRadioOptions"]').change(handleColorChange);

        // Thực hiện logic cập nhật kích thước khi trang được tải
        var selectedColor = $('input[name="inlineRadioOptions"]:checked').val();
        if (selectedColor) {
            handleColorChange.call($('input[name="inlineRadioOptions"]:checked'));
        }

        // Sự kiện thay đổi kích thước sản phẩm
        $('input[name="size"]').change(updateProductDetails);

        // Hàm xử lý khi thay đổi màu sắc
        function handleColorChange() {
            var selectedColor = $(this).val();

            // Gọi API để lấy danh sách kích thước tương ứng với màu được chọn
            $.ajax({
                url: '/product-detail/find-size',
                method: 'GET',
                data: {colorId: selectedColor},
                success: function (response) {
                    updateSizeOptions(response);
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }

        // Hàm cập nhật danh sách kích thước
        function updateSizeOptions(sizes) {
            // Vô hiệu hóa tất cả các tùy chọn kích thước
            $('.radio_size').prop('disabled', true).prop('checked', false);
            $('.lable_radio_size').addClass('disabled');
            $('.lable_radio_size').removeClass('selected_radio_size');

            // Bật lại các tùy chọn kích thước tương ứng với màu được chọn
            $.each(sizes, function (index, sizeId) {
                var $sizeInput = $('#size' + sizeId);
                var $sizeLabel = $sizeInput.next('label');

                $sizeInput.prop('disabled', false);
                $sizeLabel.removeClass('disabled');

                // Nếu đây là mục đầu tiên trong danh sách kích thước, chọn nó
                if (index === 0) {
                    $sizeInput.prop('checked', true);
                    $sizeLabel.addClass('selected_radio_size');
                }
            });

            // Cập nhật chi tiết sản phẩm sau khi cập nhật kích thước
            updateProductDetails();
        }

        function formatCurrency(amount) {
            return amount.toLocaleString('vi-VN', {style: 'currency', currency: 'VND'}).replace('₫', ' VNĐ');
        }

        // Hàm cập nhật chi tiết sản phẩm
        function updateProductDetails() {
            var size = $('input[name="size"]:checked').val();
            var color = $('input[name="inlineRadioOptions"]:checked').val();

            if (size && color) {
                if ($('#linkAdd').data('product-size') === size && $('#linkAdd').data('product-color') === color) {
                    return; // Không gọi lại API nếu không có thay đổi
                }

                $.ajax({
                    url: '/product-detail/find-detail',
                    type: 'GET',
                    data: {sizeId: size, colorId: color},
                    success: function (response) {
                        $('#price-product').text(formatCurrency(response.donGia));
                        $('#quantily-product').text('Số lượng hiện có: ' + response.soLuong);
                        $('#linkAdd')
                            .data('product-id', response.id)
                            .data('product-size', size)
                            .data('product-color', color)
                            .attr('href', "/gio-hang/add?idChiTietSanPham=" + response.id + "&soLuong=1");
                        $('.quantity_number').text('1'); // Reset số lượng khi đổi sản phẩm
                    },
                    error: function (error) {
                        console.log(error);
                    }
                });
            }
        }

        // Hàm cập nhật liên kết giỏ hàng
        function updateCartLink() {
            var quantity = $('.quantity_number').text();
            var size = $('input[name="size"]:checked').val();
            var color = $('input[name="inlineRadioOptions"]:checked').val();

            if (size && color) {
                $('#linkAdd').attr(
                    'href',
                    "/gio-hang/add?idChiTietSanPham=" + $('#linkAdd').data('product-id') + "&soLuong=" + quantity
                );
            }
        }

        // Sự kiện tăng giảm số lượng
        $('.btn_Subtrac').click(function () {
            var quantity = parseInt($('.quantity_number').text());
            if (quantity > 1) {
                $('.quantity_number').text(quantity - 1);
                updateCartLink(); // Chỉ cập nhật link
            }
        });

        $('.btn_plus').click(function () {
            var quantity = parseInt($('.quantity_number').text());
            $('.quantity_number').text(quantity + 1);
            updateCartLink(); // Chỉ cập nhật link
        });
    });
</script>


</body>
</html>