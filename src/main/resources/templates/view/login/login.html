<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/all.css">
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-thin.css">
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-solid.css">
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-regular.css">
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-light.css">
  <link rel="stylesheet" href="/css/LoginStyle.css">
  <title>Document</title>
</head>
<body>
<div class="container-fluid d-flex g-0" style="height: 100%">
  <div style="background-image: url('/img/img1.jpg'); background-size:cover; flex: 1;">
    <div class="d-flex align-items-center" style=" margin: 60px 0 0 80px">
      <img style="height: 36px; margin-right: 8px;" src="/img/logo.png" alt="logo">
      <p class="title d-inline p-0 m-0">Krist</p>
    </div>
  </div>
  <div style="flex: 1">
    <div class="login-box" style="width: 500px; margin: 130px auto 0">
      <h2 class="header">ChÃ o Má»«ng ğŸ‘‹</h2>
      <p class="title-login">Vui lÃ²ng Ä‘Äƒng nháº­p</p>
      <form class="needs-validation" novalidate th:action="@{/dang-nhap-khach-hang}" method="post">
        <div class="mb-2">
          <label for="usernameForm" class="form-label">TÃªn Ä‘Äƒng nháº­p</label>
          <input style="border: 1px solid #000" type="text" class="form-control custom-input"
                 id="usernameForm" placeholder="abc123" th:name="tenDangNhap" required>
          <div class="invalid-feedback">TÃªn Ä‘Äƒng nháº­p khÃ´ng há»£p lá»‡.</div>
        </div>
        <div class="mb-2">
          <label for="passForm" class="form-label">Máº­t kháº©u</label>
          <input style="border: 1px solid #000" type="password" class="form-control custom-input"
                 id="passForm" placeholder="máº­t kháº©u" th:name="matKhau" required>
          <div class="invalid-feedback">Máº­t kháº©u khÃ´ng há»£p lá»‡.</div>
        </div>
        <div class="remember-forgot mb-4">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
            <label class="form-check-label" for="flexCheckChecked">
              LÆ°u thÃ´ng tin
            </label>
          </div>
          <div>
            <a href="#" style="color: #000; text-decoration: none">QuÃªn máº­t kháº©u?</a> |
            <a href="/dang-ki" style="color: #000; text-decoration: none">ÄÄƒng kÃ½</a>
          </div>

        </div>
        <button type="submit" class="login-btn" style="border-radius: 10px">ÄÄƒng nháº­p</button>
      </form>
    </div>
  </div>
</div>

<!-- Alert thÃ´ng bÃ¡o tháº¥t báº¡i -->
<div class="alert alert-danger alert-dismissible fade show position-fixed top-0 end-0 m-3" role="alert" id="alertMessage" style="display: none;">
  <strong>Tháº¥t báº¡i!</strong> <span id="alertBody">ThÃ´ng bÃ¡o nÃ y sáº½ hiá»ƒn thá»‹ káº¿t quáº£.</span>
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<!-- Alert thÃ´ng bÃ¡o tá»« backend -->
<div th:if="${message}" th:class="${messageType} + ' alert alert-dismissible fade show position-fixed top-0 end-0 m-3'" id="successAlert" role="alert">
  <strong th:text="${titleMsg}">TiÃªu Ä‘á»</strong> <span th:text="${message}">ThÃ´ng bÃ¡o nÃ y sáº½ hiá»ƒn thá»‹ káº¿t quáº£.</span>
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  (function () {
    'use strict';

    // Fetch all forms with class 'needs-validation'
    var forms = document.querySelectorAll('.needs-validation');

    // Loop over forms and prevent submission if validation fails
    Array.prototype.slice.call(forms).forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
          showAlert( "error", "ÄÃ£ cÃ³ lá»—i xáº£y ra. Vui lÃ²ng kiá»ƒm tra láº¡i.");
        }
        form.classList.add('was-validated');
      }, false);

      // Add 'change' event listener for all inputs to validate them dynamically
      var inputs = form.querySelectorAll('input');
      Array.prototype.slice.call(inputs).forEach(function (input) {
        input.addEventListener('change', function () {
          if (input.checkValidity()) {
            input.classList.remove('is-invalid');
            input.classList.add('is-valid');
          } else {
            input.classList.remove('is-valid');
            input.classList.add('is-invalid');
            showAlert("error","Dá»¯ liá»‡u khÃ´ng há»£p lá»‡ trong " + input.placeholder);
          }
        });
      });
    });

    //thÃ´ng bÃ¡o
    function showAlert(type, message) {
      let alertElement;

      if (type === 'success') {
        alertElement = document.getElementById('successAlert');
        alertElement.querySelector('span').textContent = message; // Thiáº¿t láº­p ná»™i dung thÃ´ng bÃ¡o thÃ nh cÃ´ng
        alertElement.style.display = 'block'; // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng
      } else if (type === 'error') {
        alertElement = document.getElementById('alertMessage');
        alertElement.querySelector('#alertBody').textContent = message; // Thiáº¿t láº­p ná»™i dung thÃ´ng bÃ¡o lá»—i
        alertElement.style.display = 'block'; // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i
      }

      // Tá»± Ä‘á»™ng áº©n thÃ´ng bÃ¡o sau 5 giÃ¢y
      setTimeout(() => {
        if (alertElement) {
          var bootstrapAlert = new bootstrap.Alert(alertElement);
          bootstrapAlert.close();
        }
      }, 5000);
    }

    document.addEventListener('DOMContentLoaded', function () {
      // Kiá»ƒm tra vÃ  áº©n thÃ´ng bÃ¡o thÃ nh cÃ´ng náº¿u cÃ³
      var successAlert = document.getElementById('successAlert');
      if (successAlert && successAlert.style.display !== 'none') {
        setTimeout(function () {
          var bootstrapAlert = new bootstrap.Alert(successAlert);
          bootstrapAlert.close();
        }, 5000);
      }
    });

  })();
</script>
</body>
</html>