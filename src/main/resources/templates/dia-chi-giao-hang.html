<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krist | home</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/all.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-thin.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-solid.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-regular.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-light.css">
    <link rel="stylesheet" href="/css/StyleHomePage.css">
    <style>
        .step {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: #f1f1f1;
            color: #6c757d;
            font-size: 1.5rem;
        }

        .step.active {
            background-color: #000; /* Màu tối cho bước đang hoạt động */
            color: #fff;
        }

        .line {
            flex-grow: 1;
            height: 2px;
            border-top: 2px dashed #ddd;
            position: relative;
            top: 50%;
            transform: translateY(-50%); /* Căn giữa theo trục dọc */
            border-top: 2px dashed #ddd; /* Đường nét đứt */
        }
    </style>
</head>
<body>
<div class="main">
    <!-- Notification Bar -->
    <!-- Header -->
    <div class="header">
        <div style="display: flex;">
            <div style="flex: 1;">
                <div class="d-flex align-items-center">
                    <img style="height: 36px; margin-right: 8px;" src="/img/logo.png" alt="logo">
                    <p class="title d-inline p-0 m-0">
                        <a style="color: #000; text-decoration: none" href="/trang-chu">Krist</a>
                    </p>
                </div>
            </div>
            <div style="flex: 2;">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container-fluid">
                        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                            <div class="navbar-nav" style="width: 100%; justify-content: space-between;">
                                <div>
                                    <li class="nav-item">
                                        <a class="nav-link cl-black s-18" href="/trang-chu">Trang chủ</a>
                                    </li>
                                </div>
                                <div>
                                    <li class="nav-item dropdown">
                                        <a class="nav-link cl-black s-18 dropdown-toggle" href="#" id="navbarDropdown"
                                           role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            Danh mục
                                        </a>
                                        <ul class="dropdown-menu" style="width: 800px; left: -240px; top: 55px;" aria-labelledby="navbarDropdown">
                                            <div class="d-flex">
                                                <div class="text-center" style="flex: 1; border-right: 1px solid #000;">
                                                    <p class="font-blod">Danh mục</p>
                                                    <hr>
                                                    <div class="p-2 hover-effect" th:each="item : ${listDanhMuc}">
                                                        <a th:if="${listDanhMuc.size() > 0}"
                                                           th:href="@{/danh-sach-san-pham(danhMucId=${item.id})}"
                                                           style="text-decoration: none ; color : black">
                                                            <span  th:text="${item.getTenDanhMuc()}"></span></a>
                                                    </div>
                                                    <h5 th:unless="${listDanhMuc.size() > 0}" style="color: gray;">Hiện tại không có danh mục nào</h5>

                                                </div>
                                                <div class="text-center" style="flex: 1; border-right: 1px solid #000;">
                                                    <p class="font-blod">Cổ áo</p>
                                                    <hr>
                                                    <div class="p-2 hover-effect" th:each="item : ${listCoAo}">
                                                        <a th:if="${listCoAo.size() > 0}"

                                                           th:href="@{/danh-sach-san-pham(coAoId=${item.id})}"
                                                           style="text-decoration: none ; color : black"><span  th:text="${item.getKieuCoAo()}"></span></a>
                                                    </div>
                                                    <h5 th:unless="${listCoAo.size() > 0}" style="color: gray;">Hiện tại không có cổ áo nào</h5>
                                                </div>
                                                <div class="text-center" style="flex: 1; border-right: 1px solid #000;">
                                                    <p class="font-blod">Tay áo</p>
                                                    <hr>
                                                    <div th:if="${listTayAo.size() > 0}" class="p-2 hover-effect" th:each="item : ${listTayAo}">
                                                        <a th:href="@{/danh-sach-san-pham(tayAoId=${item.id})}" style="text-decoration: none ; color : black"><span  th:text="${item.getKieuTayAo()}"></span></a>
                                                    </div>
                                                    <h5 th:unless="${listTayAo.size() > 0}" style="color: gray;">Hiện tại không có tay áo nào</h5>
                                                </div>
                                            </div>
                                        </ul>
                                    </li>
                                </div>
                                <div>
                                    <li class="nav-item">
                                        <a class="nav-link cl-black s-18" href="#">Về chúng tôi</a>
                                    </li>
                                </div>
                                <div>
                                    <li class="nav-item">
                                        <a class="nav-link cl-black s-18" href="#">Hoạt động</a>
                                    </li>
                                </div>
                                <div>
                                    <li class="nav-item">
                                        <a class="nav-link cl-black s-18" href="#">Liên hệ</a>
                                    </li>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
            <div style="flex: 1;">
                <div class="header_right d-flex align-items-center justify-content-end" style="height: 100%;">
                    <div>
                        <a class="cl-black" href="/danh-sach-san-pham"><i
                                class="fa-regular s-18 fa-magnifying-glass"></i></a>
                    </div>
                    <div style="margin: 0px 46px;">
                        <a class="cl-black" href="#" data-bs-toggle="modal" data-bs-target="#modal_cart"><i
                                class="fa-sharp s-18 fa-regular fa-heart"></i></a>
                    </div>
                    <div class="me-4 position-relative cart-container">
                        <a class="cl-black" href="/gio-hang-chi-tiet">
                            <i class="fa-regular s-18 fa-cart-minus"></i>
                            <!-- Hiển thị tổng số lượng -->
                            <span th:if="${totalCartItem > 0}"
                                  th:text="${totalCartItem}" style="background-color: red"
                                  class="badge badge-danger position-absolute top-0 start-100 translate-middle">
                            </span>
                        </a>
                        <!-- Popup cart -->
                        <div class="cart-popup position-absolute bg-white shadow p-3 display_none"
                             style=" width: 370px; right: -16px; top: 20px; z-index: 10;">
                            <div class="cart-popup-header">
                                <p class="modal-title" th:text="'Bạn có ' + ${totalCartItem} + ' sản phẩm trong giỏ hàng'">Bạn có </p>
                            </div>
                            <div class="cart-popup-body">
                                <div class="cart_product_row" th:each="item : ${gioHangChiTietList}">
                                    <div class="img_product_cart">
                                        <div th:style="|background: url('/img/${item.chiTietSanPham.anhSanPham}') no-repeat center / cover; width: 100%; height: 100%;|">
                                        </div>
                                    </div>
                                    <div class="product_cart">
                                        <!-- Tên sản phẩm -->
                                        <p th:text="${item.getChiTietSanPham().sanPham.tenSanPham}"></p>

                                        <!-- Màu sắc và kích thước -->
                                        <div class="product-info">
                                            <div>
                                                <span>Color:</span>
                                                <div class="color-indicator" th:style="'background-color:' + ${item.getChiTietSanPham().mau.maMauSac}"></div>
                                            </div>
                                            <span>Size: <span th:text="${item.getChiTietSanPham().size.tenSize}"></span></span>
                                        </div>

                                        <!-- Giá tiền và số lượng -->
                                        <div class="price-quantity">
                                            <p th:text="'Giá: ' + ${convertMoney.formatCurrency(item.getChiTietSanPham().donGia)}"></p>
                                            <p th:text="'Số lượng: ' + ${item.soLuong}"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="cart-popup-footer">
                                <div class="d-flex justify-content-between"
                                     style="border-top: 2px solid #F6F6F6; padding: 12px;">
                                    <div style="font-size: 14px; font-weight: 500;">Tổng tiền</div>
                                    <div style="font-size: 14px; font-weight: 500;" th:text="${convertMoney.formatCurrency(tongTien)}">
                                    </div>
                                </div>
                                <a href="/gio-hang-chi-tiet" class="btn btn-dark w-100">Thanh toán</a>
                            </div>
                        </div>
                    </div>
                    <div style="margin-left: 14px" th:if="khachHang != null">
                        <a class="cl-black" href="/quan-ly/don-hang"><i class="fa-regular s-18 fa-user"></i></a>
                    </div>
                    <div th:if="khachHang == null">
                        <a href="/dang-nhap" class="btn btn-dark">Đăng nhập</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid d-flex align-items-center" style="padding: 8px; ">
        <div class="container" style="padding: 0;">

            <ol class="breadcrumb" style="height: 40px; margin: 0px;">
                <h2 class="breadcrumb-item ">Địa chỉ giao hàng </h2>
            </ol>

        </div>
    </div>


    <!-- content -->

    <div class="container-fluid">
        <div class="container" style="padding: 54px 0px; margin-bottom: 120px;">
            <div class="row">
                <div class="col-7">
                    <div class="container">
                        <div class="d-flex align-items-center">
                            <div class="step active">
                                <i class="fa-light fa-house"></i>
                            </div>
                            <div class="line"></div>
                            <div class="step">
                                <i class="fa-light fa-credit-card"></i>
                            </div>
                            <div class="line"></div>
                            <div class="step">
                                <i class="fa-light fa-file-lines"></i>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between mt-2">
                            <div class="text-center">Địa Chỉ</div>
                            <div class="text-center">Phương Thức Thanh Toán</div>
                            <div class="text-center">Xác nhận</div>
                        </div>
                    </div>
                    <!--                    -->
                    <div class="mt-4">
                        <h5>Chọn địa chỉ giao hàng</h5>
                        <p>Địa chỉ bạn muốn sử dụng có hiện bên dưới không? Nếu có, hãy nhấn vào nút "Giao hàng tại đây"
                            tương ứng. Hoặc bạn có thể nhập địa chỉ giao hàng mới</p>
                    </div>
                    <div class="mt-3">
                        <form id="formDatHang" method="POST" action="/dat-hang/chon-di-chi">
                            <input type="hidden" id="shipFee" name="shipFee">
                            <input type="hidden" id="total"  th:value="${totalPrice}">
                            <div class="row g-3">
                                <div class="container mt-3">
                                    <div class="row" style="max-height: 480px; overflow-y: auto;">
                                        <div class="col-md-6 d-flex flex-wrap" th:each="diaChi,iterStat : ${diaChiList}"
                                             style="padding: 0 10px;">
                                            <div class="card p-3"
                                                 style="border: none; border-radius: 12px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); margin-bottom: 15px; flex: 1;">
                                                <div class="card-body" style="position: relative;">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <div>
                                                            <h5 class="card-title "
                                                                style="font-weight: bold; margin-bottom: 0;"
                                                                th:text="${diaChi.tenKhachHang}">Đoàn Hiếu</h5>
                                                        </div>
                                                        <div>
                                                            <!-- Radio button -->
                                                            <div class="radio ">
                                                                <input type="radio" name="diaChiSelected" th:checked="${iterStat.index == 0}"
                                                                       th:value="${diaChi.id}"
                                                                       onclick="handleAddressChange(this.value)">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <p class="card-text"
                                                       style="margin-top: 0.5rem; display: flex; align-items: center;">
                                                        <i class="fa-light fa-location-dot"
                                                           style="margin-right: 8px;"></i>
                                                        <span th:text="${convertMoney.formatFullAddress(diaChi.diaChi, diaChi.tenPhuongXa, diaChi.tenQuanHuyen, diaChi.tenTinhThanh)}">
                                                            Lê Đức Thọ, Hà Nội</span>
                                                    </p>

                                                    <p class="card-text"
                                                       style="margin-top: 0.5rem; display: flex; align-items: center;">
                                                        <i class="fa-sharp fa-light fa-phone"
                                                           style="margin-right: 8px;"></i>
                                                        <span th:text="${diaChi.sdt}">0987654321</span>
                                                    </p>

                                                    <div style="display: flex; justify-content: space-between;"
                                                         class="mt-3">
                                                        <!-- Nút chỉnh sửa và xóa -->
                                                        <div>
                                                            <a class="btn"
                                                               style="width: 140px;background-color: #F6F6F6; border-radius: 6px; padding: 10px 15px; text-decoration: none;"
                                                               data-bs-toggle="modal"
                                                               data-bs-target="#editDiaChiModal"
                                                               th:attr="onclick=|saveIdDiaChi('${diaChi.id}', '${diaChi.tenKhachHang}', '${diaChi.sdt}', '${diaChi.diaChi}',
                                                                    '${diaChi.trangThai}', '${diaChi.maTinhThanh}', '${diaChi.maQuanHuyen}', '${diaChi.maPhuongXa}')|">
                                                                <i class="fa-regular fa-pen-to-square"
                                                                   style="font-size: 16px; color: #000;"></i> Cập nhật
                                                            </a>

                                                            <a th:href="@{/dat-hang/delete-dia-chi-dat-hang/{id}(id=${diaChi.id})}"
                                                               class="btn"
                                                               style=" width: 140px;background-color: #FFF6F6; border-radius: 6px; padding: 10px 15px; text-decoration: none;">
                                                                <i class="fa-regular fa-trash-can"
                                                                   style="font-size: 16px; color: #f40606;"></i>
                                                                Xóa
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-4">
                                    <button class="btn btn-deliver" type="submit"
                                            style="background-color: #1a1a1a; color: #fff; width: 250px; padding: 10px 0; ">
                                        Giao
                                        hàng tại đây
                                    </button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div>
                        <hr style="background-color: #5b5c64">
                    </div>
                    <div class="mt-4">
                        <h5>Thêm một địa chỉ mới</h5>
                    </div>
                    <div class="mt-4">
                        <form class="needs-validation" novalidate th:action="@{/dat-hang/add-dia-chi-dat-hang}"
                              method="post">
                            <div class="row">
                                <!-- Cột bên trái -->
                                <div class="col-md-6">
                                    <div class="mb-2">
                                        <label for="tenKhachHang" class="form-label">Tên khách hàng</label>
                                        <input class="form-control custom-input" id="tenKhachHang" placeholder="Nguyen Van A" th:name="tenKhachHang" minlength="5" maxlength="100" required>
                                        <div class="invalid-feedback">Họ tên không hợp lệ.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="sdt" class="form-label">Số điện thoại</label>
                                        <input type="text" class="form-control" id="sdt" name="sdt" th:name="sdt" minlength="10" maxlength="10" required>
                                        <div class="invalid-feedback">Số điện thoại không hợp lệ</div>
                                    </div>
                                </div>

                                <!-- Cột bên phải -->
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="province" class="form-label">Tỉnh/Thành phố</label>
                                        <select id="province" class="form-control" th:name="maTinhThanh" required>
                                            <option value="">Chọn Tỉnh/Thành Phố</option>
                                        </select>
                                        <div class="invalid-feedback">Vui lòng chọn tỉnh thành phố</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="district" class="form-label">Quận/Huyện</label>
                                        <select id="district" class="form-control" th:name="maQuanHuyen" required disabled>
                                            <option value="">Chọn Quận/Huyện</option>
                                        </select>
                                        <div class="invalid-feedback">Vui lòng chọn quận huyện</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="ward" class="form-label">Phường/Xã</label>
                                        <select id="ward" class="form-control" th:name="maPhuongXa" required disabled>
                                            <option value="">Chọn Phường/Xã</option>
                                        </select>
                                        <div class="invalid-feedback">Vui lòng chọn phường xã</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Hidden fields to store names -->
                            <input type="hidden" name="tenTinhThanh" id="tenTinhThanh">
                            <input type="hidden" name="tenQuanHuyen" id="tenQuanHuyen">
                            <input type="hidden" name="tenPhuongXa" id="tenPhuongXa">

                            <!-- Dòng cuối cùng: Địa chỉ chi tiết -->
                            <div class="mb-3">
                                <label for="diaChi" class="form-label">Địa chỉ chi tiết</label>
                                <input type="text" class="form-control" id="diaChi" th:name="diaChi" minlength="5" maxlength="255" required>
                                <div class="invalid-feedback">Địa chỉ không hợp lệ</div>
                            </div>
                            <button type="submit" class="btn btn-dark btn-sm">Thêm địa chỉ</button>
                        </form>
                    </div>
                </div>
                <div class="col-5">
                    <div style="border: 1px solid #E6E7E8; border-radius: 4px; padding: 38px 18px;">

                        <div class="d-flex justify-content-between" style="margin-bottom: 18px;">
                            <div style="font-size: 16px; font-weight: 500; ">Tổng cộng:</div>
                            <div style="font-size: 16px; font-weight: 500;"><span id="grand-total" th:text="${convertMoney.formatCurrency(totalPrice)}">0.00</span>
                            </div>
                        </div>
                        <hr style="color: #5b5c64; border-width: 1px; margin-bottom: 18px;">

                        <!-- Nút mở modal danh sách khuyến mại -->
                        <div style="max-height: 300px; overflow-y: hidden;">
                            <!-- Thẻ chứa khuyến mại -->
                            <div th:each="khuyenMai, iterStat : ${listKM}" style="width: 100%">
                                <div class="d-flex"
                                     style="border: 1px dashed #000; border-radius: 8px; padding: 6px; margin-bottom: 10px; width: 100%">
                                    <div style="border-right: 1px dashed #000; flex: 1; padding: 18px 0;">
                                        <i class="fa-solid fa-tickets-perforated"
                                           style="font-size: 36px; padding: 0px 12px;"></i>
                                    </div>
                                    <div style="flex: 3; padding: 4px; font-size: 14px;">
                                        <div th:text="'Khuyến mại: ' + ${khuyenMai.tenKhuyenMai}">Khuyến mại</div>
                                        <div th:text="'Giá trị: ' + ${convertMoney.formatCurrency(khuyenMai.giaTri)} +' '
                                         +  ${khuyenMai.kieuKhuyenMai} ">Giá trị - Số lượng
                                        </div>
                                        <div class="d-flex justify-content-start align-items-center">
                                            <div th:text="'Ngày hết hạn: ' + ${#dates.format(khuyenMai.ngayKetThuc, 'dd-MM-yyyy')}">
                                                Ngày hết hạn
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Thêm các khuyến mại khác tương tự -->
                        </div>

                        <div class="d-flex justify-content-between" style="margin-bottom: 18px;">
                            <div style="font-size: 16px; font-weight: 500; color: #5C5F6A;">Phí giao hàng:</div>
                            <div style="font-size: 16px; font-weight: 500;"><span id="shippingFee">30.000</span>
                            </div>
                        </div>
                        <hr style="color: #E6E7E8; border-width: 3px; margin-bottom: 18px;">
                        <div class="d-flex justify-content-between">
                            <div style="font-size: 16px; font-weight: bold;">Tổng thanh toán:</div>
                            <div style="font-size: 16px; font-weight: bold;"><span id="final-total">0.00</span>
                            </div>
                        </div>
                    </div>

                    <!--                    danh sách sản phẩm đã chọn-->
                    <div>
                        <div class="container-fluid">
                            <div class="container" style="padding: 54px 0px; margin-bottom: 120px;">
                                <h5>Danh sách sản phẩm</h5>
                                <div class="row">
                                    <div class="col-12">
                                        <!-- Danh sách sản phẩm -->
                                        <div class="product-list">
                                            <div class="product-item d-flex align-items-start"
                                                 th:each="item : ${listSpSelected}"
                                                 style="border: 1px solid #e6e7e8; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                                                <!-- Hình ảnh sản phẩm -->
                                                <div style="flex: 1; max-width: 80px;">
                                                    <div style="width: 80px; height: 80px; border-radius: 8px; background-color: #f6f6f6;">
                                                        <div th:style="|width: 100%; height: 100%; background: url('/img/${item.chiTietSanPham.anhSanPham}') no-repeat center center / cover;|">
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Thông tin sản phẩm -->
                                                <div style="flex: 3; margin-left: 16px;">
                                                    <!-- Tên sản phẩm -->
                                                    <p style="font-size: 16px; font-weight: 500;"
                                                       th:text="${item.getChiTietSanPham().sanPham.tenSanPham}"></p>
                                                    <!-- Màu sắc và kích thước -->
                                                    <div class="d-flex align-items-center" style="margin-top: 8px;">
                                                        <span style="margin-right: 8px;">Color:</span>
                                                        <div th:style="'width: 20px; height: 20px; border-radius: 50%; background-color: ' + ${item.getChiTietSanPham().mau.maMauSac}"></div>
                                                        <span style="margin-left: 16px;">Size:
                                                            <span th:text="${item.getChiTietSanPham().size.tenSize}"></span>
                                                        </span>
                                                    </div>
                                                </div>

                                                <!-- Giá và số lượng -->
                                                <div style="flex: 2; margin-left: auto; text-align: right;">
                                                    <!-- Giá -->
                                                    <p style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">
                                                        Giá: <span
                                                            th:text="${convertMoney.formatCurrency(item.getChiTietSanPham().donGia)}"></span>
                                                    </p>
                                                    <!-- Số lượng -->
                                                    <p style="font-size: 16px;">
                                                        Số lượng: <span th:text="${item.soLuong}"></span>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- footer -->
    <div class="container-fluid d-flex align-items-center justify-content-evenly"
         style="padding: 40px 0 120px 0; margin-top: 80px; background-color: #000;">
        <div style="width: 272px; margin-right: 142px;">
            <div class="d-flex align-items-center" style="margin-bottom: 12px;">
                <div style="padding: 8px 14px; margin-right: 8px; border-radius: 5px; border: 1px solid #E6E7E8; background-color: #fff;">
                    <img src="/img/logo.png" alt="logo">
                </div>
                <div>
                    <div class="cl-white" style="font-size: 20px; font-weight: 600;">Krist</div>
                </div>
            </div>
            <p class="cl-white " style="font-size: 14px; margin-bottom: 28px;">Connect with us on social networking</p>
            <div class="d-flex justify-content-between" style="padding-right: 60px;">
                <div>
                    <i class="fa-brands fa-instagram cl-white " style="font-size: 20px;"></i>
                </div>
                <div>
                    <i class="fa-brands fa-facebook cl-white " style="font-size: 20px;"></i>
                </div>
                <div>
                    <i class="fa-brands fa-youtube cl-white " style="font-size: 20px;"></i>
                </div>
                <div>
                    <i class="fa-brands fa-tiktok cl-white " style="font-size: 20px;"></i>
                </div>
                <div>
                    <i class="fa-brands fa-twitter cl-white " style="font-size: 20px;"></i>
                </div>
            </div>
        </div>
        <div style="width: 484px; margin-right: 100px;">
            <div style=" margin-right: 72px; display: inline-block;">
                <p class="cl-white" style="font-size: 14px; font-weight: 500; margin-bottom: 40px;">SUPPORT</p>
                <p><a href="#" class="cl-white"
                      style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">FAQ</a></p>
                <p><a href="#" class="cl-white"
                      style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Terms of
                    use</a></p>
                <p><a href="#" class="cl-white"
                      style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Privacy
                    Policy</a></p>

            </div>
            <div style=" margin-right: 72px; display: inline-block;">
                <p class="cl-white" style="font-size: 14px; font-weight: 500; margin-bottom: 40px;">COMPANY</p>
                <p><a href="#" class="cl-white"
                      style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">About
                    us</a></p>
                <p><a href="#" class="cl-white"
                      style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Contact</a>
                </p>
                <p><a href="#" class="cl-white"
                      style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Careers</a>
                </p>

            </div>
            <div style=" margin-right: 72px; display: inline-block;">
                <p class="cl-white" style="font-size: 14px; font-weight: 500; margin-bottom: 40px;">SHOP</p>
                <p><a href="#" class="cl-white"
                      style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">My
                    Account</a></p>
                <p><a href="#" class="cl-white"
                      style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Checkout</a>
                </p>
                <p><a href="#" class="cl-white"
                      style="text-decoration: none; font-size: 14px; font-weight: 500; margin-bottom: 16px;">Cart</a>
                </p>

            </div>
        </div>
        <div style="width: 272px;">
            <p class="cl-white" style="font-size: 14px; font-weight: 500; margin-bottom: 22px;">ACCEPTED PAYMENTS</p>
            <div class="d-flex justify-content-between" style="padding-right: 60px;">
                <div>
                    <i class="fa-brands fa-cc-mastercard cl-white" style="font-size: 20px;"></i>
                </div>
                <div>
                    <i class="fa-brands fa-cc-visa cl-white" style="font-size: 20px;"></i>
                </div>
                <div>
                    <i class="fa-brands fa-cc-amex cl-white" style="font-size: 20px;"></i>
                </div>
                <div>
                    <i class="fa-brands fa-cc-paypal cl-white" style="font-size: 20px;"></i>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- Modal cập nhật địa chỉ -->
<div class="modal fade" id="editDiaChiModal" tabindex="-1" aria-labelledby="editDiaChiModalLabel" aria-hidden="true">
    <div class="modal-dialog"  style="max-width: 800px;">
        <div class="modal-content" style="margin-top: 100px;">
            <div class="modal-header">
                <h5 class="modal-title" id="editDiaChiModalLabel">Cập nhật địa chỉ</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="padding:30px;">
                <form th:action="@{/dat-hang/update-dia-chi-dat-hang}" method="post" th:object="${diaChiCre}" class="needs-validation" novalidate>
                    <!-- ID ẩn -->
                    <div class="display_none">
                        <input type="hidden" id="editDiaChiId" name="id" th:field="*{id}">
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <!-- Tên khách hàng -->
                            <div class="mb-2">
                                <label for="tenKhachHangEdit" class="form-label">Tên khách hàng</label>
                                <input type="text" class="form-control custom-input" id="tenKhachHangEdit" placeholder="Nguyen Van A"
                                       th:field="*{tenKhachHang}" minlength="5" maxlength="100" required>
                                <div class="invalid-feedback">Họ tên không hợp lệ.</div>
                            </div>

                            <!-- Số điện thoại -->
                            <div class="mb-3">
                                <label for="editSdt" class="form-label">Số điện thoại</label>
                                <input type="text" class="form-control" id="editSdt" placeholder="Nhập số điện thoại"
                                       th:field="*{sdt}" minlength="10" maxlength="10" required>
                                <div class="invalid-feedback">Số điện thoại không hợp lệ.</div>
                            </div>
                        </div>


                        <div class="col-md-6">
                            <!-- Tỉnh/Thành phố -->
                            <div class="mb-3">
                                <label for="editTinhThanh" class="form-label">Tỉnh/Thành phố</label>
                                <select id="editTinhThanh" class="form-control" th:field="*{maTinhThanh}" required>
                                    <option value="">Chọn Tỉnh/Thành phố</option>
                                    <!-- Option tỉnh/thành -->
                                </select>
                                <div class="invalid-feedback">Vui lòng chọn tỉnh/thành phố.</div>
                            </div>


                            <!-- Quận/Huyện -->
                            <div class="mb-3">
                                <label for="editQuanHuyen" class="form-label">Quận/Huyện</label>
                                <select id="editQuanHuyen" class="form-control" th:field="*{maQuanHuyen}" required>
                                    <option value="">Chọn Quận/Huyện</option>
                                    <!-- Option quận/huyện -->
                                </select>
                                <div class="invalid-feedback">Vui lòng chọn quận/huyện.</div>
                            </div>

                            <!-- Phường/Xã -->
                            <div class="mb-3">
                                <label for="editPhuongXa" class="form-label">Phường/Xã</label>
                                <select id="editPhuongXa" class="form-control" th:field="*{maPhuongXa}" required>
                                    <option value="">Chọn Phường/Xã</option>
                                    <!-- Option phường/xã -->
                                </select>
                                <div class="invalid-feedback">Vui lòng chọn phường/xã.</div>
                            </div>
                        </div>
                    </div>
                    <!-- Địa chỉ -->
                    <div class="mb-3">
                        <label for="editDiaChi" class="form-label">Địa chỉ</label>
                        <input type="text" class="form-control" id="editDiaChi" placeholder="Nhập địa chỉ"
                               th:field="*{diaChi}" minlength="3" maxlength="255" required>
                        <div class="invalid-feedback">Địa chỉ không hợp lệ.</div>
                    </div>

                    <!-- Hidden fields to store names -->
                    <input type="hidden" name="tenTinhThanh" id="editTenTinhThanh">
                    <input type="hidden" name="tenQuanHuyen" id="editTenQuanHuyen">
                    <input type="hidden" name="tenPhuongXa" id="editTenPhuongXa">

                    <!-- Phần trạng thái đã được ẩn -->
                    <div class="mb-4" style="display:none;" id="statusSection">
                        <label class="form-label">Trạng thái</label><br>
                        <input type="radio" id="active" th:field="*{trangThai}" th:value="${T(com.example.kristp.enums.Status).ACTIVE}">
                        <label for="active">Hoạt động</label><br>
                        <input type="radio" id="inactive" th:field="*{trangThai}" th:value="${T(com.example.kristp.enums.Status).INACTIVE}">
                        <label for="inactive">Không hoạt động</label>
                    </div>

                    <!-- Nút cập nhật -->
                    <div>
                        <button type="submit" class="btn btn-dark btn-sm">Cập nhật</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Alert thông báo thất bại -->
<div class="alert alert-danger alert-dismissible fade show position-fixed top-0 end-0 m-3" role="alert"
     id="alertMessage"
     style="display: none; z-index: 1060;">
    <strong>Thất bại!</strong> <span id="alertBody">Thông báo này sẽ hiển thị kết quả.</span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<div class="alert alert-success alert-dismissible fade show position-fixed top-0 end-0 m-3" role="alert"
     id="alertMessage2"
     style="display: none;  z-index: 1060;">
    <strong>Thành công!</strong> <span id="alertBody2">Thông báo này sẽ hiển thị kết quả.</span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<!-- Alert thông báo từ backend -->
<div th:if="${message}" th:class="${messageType} + ' alert alert-dismissible fade show position-fixed top-0 end-0 m-3'"
     id="successAlert" role="alert">
    <strong th:text="${titleMsg}">Tiêu đề</strong> <span th:text="${message}">Thông báo này sẽ hiển thị kết quả.</span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!--giao hàng nhanh-->
<script>
    $(document).ready(function () {
        // Gọi API để lấy danh sách tỉnh/thành phố
        $.ajax({
            url: "https://online-gateway.ghn.vn/shiip/public-api/master-data/province",
            type: "POST",
            dataType: "json",
            headers: {
                "Content-Type": "application/json",
                Token: "847c9bb7-6e42-11ee-a59f-a260851ba65c",
            },
            success: function (response) {
                const provinces = response.data;
                const provinceSelect = $("#province");

                provinces.forEach(function (province) {
                    provinceSelect.append(
                        `<option value="${province.ProvinceID}">${province.ProvinceName}</option>`
                    );
                });
            },
            error: function (xhr, status, error) {
                console.error("API Request Failed:", error);
            },
        });

        // Khi chọn tỉnh/thành phố
        $("#province").change(function () {
            const selectedProvinceId = $(this).val();
            const selectedProvinceName = $("#province option:selected").text();
            $("#tenTinhThanh").val(selectedProvinceName); // Gán tên tỉnh/thành phố vào input hidden

            // Reset và khóa các dropdown cấp dưới
            $("#district")
                .prop("disabled", true)
                .empty()
                .append("<option value=''>Chọn Quận/Huyện</option>");
            $("#ward")
                .prop("disabled", true)
                .empty()
                .append("<option value=''>Chọn Phường/Xã</option>");

            if (selectedProvinceId) {
                // Gọi API để lấy danh sách quận/huyện
                $.ajax({
                    url: "https://online-gateway.ghn.vn/shiip/public-api/master-data/district",
                    type: "GET",
                    dataType: "json",
                    headers: {
                        "Content-Type": "application/json",
                        Token: "847c9bb7-6e42-11ee-a59f-a260851ba65c",
                    },
                    data: { province_id: selectedProvinceId },
                    success: function (response) {
                        const districts = response.data;
                        const districtSelect = $("#district");

                        districts.forEach(function (district) {
                            districtSelect.append(
                                `<option value="${district.DistrictID}">${district.DistrictName}</option>`
                            );
                        });

                        districtSelect.prop("disabled", false);
                    },
                    error: function (xhr, status, error) {
                        console.error("API Request Failed:", error);
                    },
                });
            }
        });

        // Khi chọn quận/huyện
        $("#district").change(function () {
            const selectedDistrictId = $(this).val();
            const selectedDistrictName = $("#district option:selected").text();
            $("#tenQuanHuyen").val(selectedDistrictName); // Gán tên quận/huyện vào input hidden

            // Reset và khóa dropdown cấp dưới
            $("#ward")
                .prop("disabled", true)
                .empty()
                .append("<option value=''>Chọn Phường/Xã</option>");

            if (selectedDistrictId) {
                // Gọi API để lấy danh sách phường/xã
                $.ajax({
                    url: "https://online-gateway.ghn.vn/shiip/public-api/master-data/ward",
                    type: "GET",
                    dataType: "json",
                    headers: {
                        "Content-Type": "application/json",
                        Token: "847c9bb7-6e42-11ee-a59f-a260851ba65c",
                    },
                    data: { district_id: selectedDistrictId },
                    success: function (response) {
                        const wards = response.data;
                        const wardSelect = $("#ward");

                        wards.forEach(function (ward) {
                            wardSelect.append(
                                `<option value="${ward.WardCode}">${ward.WardName}</option>`
                            );
                        });

                        wardSelect.prop("disabled", false);
                    },
                    error: function (xhr, status, error) {
                        console.error("API Request Failed:", error);
                    },
                });
            }
        });

        // Khi chọn phường/xã
        $("#ward").change(function () {
            const selectedWardName = $("#ward option:selected").text();
            $("#tenPhuongXa").val(selectedWardName); // Gán tên phường/xã vào input hidden
        });
    });
</script>
<!--update modal-->
<script>
    $(document).ready(function () {
        // Hàm gọi API lấy danh sách tỉnh/thành phố
        function fetchProvinces(selectedProvinceId = null) {
            const provinceSelect = $("#editTinhThanh");
            provinceSelect.empty().append("<option value=''>Chọn Tỉnh/Thành</option>");

            $.ajax({
                url: "https://online-gateway.ghn.vn/shiip/public-api/master-data/province",
                type: "POST",
                dataType: "json",
                headers: {
                    "Content-Type": "application/json",
                    Token: "847c9bb7-6e42-11ee-a59f-a260851ba65c",
                },
                success: function (response) {
                    const provinces = response.data;

                    provinces.forEach(function (province) {
                        provinceSelect.append(
                            `<option value="${province.ProvinceID}">${province.ProvinceName}</option>`
                        );
                    });

                    // Gán giá trị tỉnh/thành phố nếu có
                    if (selectedProvinceId) {
                        provinceSelect.val(selectedProvinceId).trigger("change");
                    }
                },
                error: function (xhr, status, error) {
                    console.error("API Request Failed:", error);
                },
            });
        }

        // Hàm gọi API lấy danh sách quận/huyện
        function fetchDistricts(provinceId, selectedDistrictId = null) {
            const districtSelect = $("#editQuanHuyen");
            districtSelect.prop("disabled", true).empty().append("<option value=''>Chọn Quận/Huyện</option>");

            // Reset phường/xã khi tỉnh/thành phố thay đổi
            const wardSelect = $("#editPhuongXa");
            wardSelect.prop("disabled", true).empty().append("<option value=''>Chọn Phường/Xã</option>");

            if (!provinceId) return;

            $.ajax({
                url: "https://online-gateway.ghn.vn/shiip/public-api/master-data/district",
                type: "GET",
                dataType: "json",
                headers: {
                    "Content-Type": "application/json",
                    Token: "847c9bb7-6e42-11ee-a59f-a260851ba65c",
                },
                data: { province_id: provinceId },
                success: function (response) {
                    const districts = response.data;

                    districts.forEach(function (district) {
                        districtSelect.append(
                            `<option value="${district.DistrictID}">${district.DistrictName}</option>`
                        );
                    });

                    districtSelect.prop("disabled", false);

                    // Gán giá trị quận/huyện nếu có
                    if (selectedDistrictId) {
                        districtSelect.val(selectedDistrictId).trigger("change");
                    }
                },
                error: function (xhr, status, error) {
                    console.error("API Request Failed:", error);
                },
            });
        }

        // Hàm gọi API lấy danh sách phường/xã
        function fetchWards(districtId, selectedWardCode = null) {
            const wardSelect = $("#editPhuongXa");
            wardSelect.prop("disabled", true).empty().append("<option value=''>Chọn Phường/Xã</option>");

            if (!districtId) return;

            $.ajax({
                url: "https://online-gateway.ghn.vn/shiip/public-api/master-data/ward",
                type: "GET",
                dataType: "json",
                headers: {
                    "Content-Type": "application/json",
                    Token: "847c9bb7-6e42-11ee-a59f-a260851ba65c",
                },
                data: { district_id: districtId },
                success: function (response) {
                    const wards = response.data;

                    wards.forEach(function (ward) {
                        wardSelect.append(
                            `<option value="${ward.WardCode}">${ward.WardName}</option>`
                        );
                    });

                    wardSelect.prop("disabled", false);

                    // Gán giá trị phường/xã nếu có
                    if (selectedWardCode) {
                        wardSelect.val(selectedWardCode);
                    }
                },
                error: function (xhr, status, error) {
                    console.error("API Request Failed:", error);
                },
            });
        }

        // Khi mở modal cập nhật, điền dữ liệu vào form
        window.saveIdDiaChi = function (id, tenKhachHang, sdt, diaChi, trangThai, maTinhThanh, maQuanHuyen, maPhuongXa) {
            // Gán giá trị cơ bản vào modal
            $('#editDiaChiId').val(id);
            $('#tenKhachHangEdit').val(tenKhachHang);
            $('#editSdt').val(sdt);
            $('#editDiaChi').val(diaChi);

            // Cập nhật trạng thái
            if (trangThai === 'ACTIVE') {
                $('#active').prop('checked', true);
            } else {
                $('#inactive').prop('checked', true);
            }

            // Gọi API để tải danh sách tỉnh/thành phố và gán giá trị
            fetchProvinces(maTinhThanh);

            // Khi tỉnh/thành phố thay đổi, gọi API quận/huyện
            if (maTinhThanh) {
                fetchDistricts(maTinhThanh, maQuanHuyen);
            }

            // Khi quận/huyện thay đổi, gọi API phường/xã
            if (maQuanHuyen) {
                fetchWards(maQuanHuyen, maPhuongXa);
            }
        };

        // Khi chọn tỉnh/thành phố
        $("#editTinhThanh").change(function () {
            const selectedProvinceId = $(this).val();
            const selectedProvinceName = $("#editTinhThanh option:selected").text();
            $("#editTenTinhThanh").val(selectedProvinceName);

            // Reset quận/huyện và phường/xã
            $("#editQuanHuyen").prop("disabled", true).empty().append("<option value=''>Chọn Quận/Huyện</option>");
            $("#editPhuongXa").prop("disabled", true).empty().append("<option value=''>Chọn Phường/Xã</option>");

            // Fetch quận/huyện mới
            fetchDistricts(selectedProvinceId);
        });

        // Khi chọn quận/huyện
        $("#editQuanHuyen").change(function () {
            const selectedDistrictId = $(this).val();
            const selectedDistrictName = $("#editQuanHuyen option:selected").text();
            $("#editTenQuanHuyen").val(selectedDistrictName);

            // Reset phường/xã
            $("#editPhuongXa").prop("disabled", true).empty().append("<option value=''>Chọn Phường/Xã</option>");

            // Fetch phường/xã mới
            fetchWards(selectedDistrictId);
        });

        // Khi chọn phường/xã
        $("#editPhuongXa").change(function () {
            const selectedWardName = $("#editPhuongXa option:selected").text();
            $("#editTenPhuongXa").val(selectedWardName);
        });

        // Tải danh sách tỉnh/thành phố ngay khi trang được load
        fetchProvinces();
    });
</script>

<!--tinhs phis -->

<script>

    $(document).ready(function () {
        // Tự động chạy khi trang load
        const defaultAddressId = $("input[name='diaChiSelected']:checked").val(); // Lấy ID địa chỉ đầu tiên được chọn
        if (defaultAddressId) {
            handleAddressChange(defaultAddressId); // Gọi hàm xử lý địa chỉ
        } else {
            console.warn("Không tìm thấy địa chỉ mặc định.");
        }
    });

    function handleAddressChange(addressId) {
        // Gọi API để lấy thông tin địa chỉ
        $.ajax({
            url: `/user-dia-chi/find-dia-chi`, // API lấy thông tin địa chỉ
            type: "GET",
            data: { id: addressId }, // Truyền id qua query parameter
            dataType: "json",
            success: function (response) {
                // Lấy mã quận, mã phường từ response
                const toDistrictId = response.maQuanHuyen;
                const toWardCode = response.maPhuongXa;

                // Kiểm tra và gọi hàm tính phí ship
                if (toDistrictId && toWardCode) {
                    calculateShippingFee(toDistrictId, toWardCode);
                }
            },
            error: function (xhr, status, error) {
                console.error("Lỗi khi lấy thông tin địa chỉ:", error);
            },
        });
    }



    function calculateShippingFee(parsedDistrictId, parsedWardCode) {
        const total = parseFloat($("#total").val());
        const toDistrictId = parseInt(parsedDistrictId); // Parse mã quận
        const toWardCode = parsedWardCode; // Parse mã phường
        if (toDistrictId && toWardCode) {
            $.ajax({
                url: "https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/fee",
                type: "POST",
                dataType: "json",
                headers: {
                    "Content-Type": "application/json",
                    Token: "bf62d596-a73c-11ef-a251-d6361c4ed5e2",
                    ShopId: 5469318,
                },
                data: JSON.stringify({
                    service_id: 53321,
                    insurance_value: total,
                    from_district_id: 3440,
                    from_ward_code: "13010",
                    to_district_id: toDistrictId,
                    to_ward_code: toWardCode,
                    weight: 1000,
                    height:15,
                    length:15,
                    width:15
                }),
                success: function (response) {
                    const shippingFee = response.data.total;
                    const formattedShippingFee = shippingFee.toLocaleString("vi-VN", {
                        style: "currency",
                        currency: "VND",
                    });

                    // Hiển thị phí vận chuyển
                    $("#shipFee").val(shippingFee);
                    $("#shippingFee").text(formattedShippingFee);

                    // Tính tổng tiền cuối cùng và hiển thị
                    const finalTotal = shippingFee + total; // Tổng tiền sau khi cộng phí vận chuyển
                    const formattedFinalTotal = finalTotal.toLocaleString("vi-VN", {
                        style: "currency",
                        currency: "VND",
                    });
                    $("#final-total").text(formattedFinalTotal);
                },
                error: function (xhr, status, error) {
                    console.log("API Request Failed:", error);
                    $.ajax({
                        url: "https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/fee",
                        type: "POST",
                        dataType: "json",
                        headers: {
                            "Content-Type": "application/json",
                            Token: "bf62d596-a73c-11ef-a251-d6361c4ed5e2",
                            ShopId: 5469318,
                        },
                        data: JSON.stringify({
                            service_id: 53320,
                            insurance_value: total,
                            from_district_id: 3440,
                            from_ward_code: "13010",
                            to_district_id: toDistrictId,
                            to_ward_code: toWardCode,
                            weight: 1000,
                            height:15,
                            length:15,
                            width:15
                        }),
                        success: function (response) {
                            const shippingFee = response.data.total;
                            const formattedShippingFee = shippingFee.toLocaleString("vi-VN", {
                                style: "currency",
                                currency: "VND",
                            });

                            // Hiển thị phí vận chuyển
                            $("#shipFee").val(shippingFee);
                            $("#shippingFee").text(formattedShippingFee);

                            // Tính tổng tiền cuối cùng và hiển thị
                            const finalTotal = shippingFee + total; // Tổng tiền sau khi cộng phí vận chuyển
                            const formattedFinalTotal = finalTotal.toLocaleString("vi-VN", {
                                style: "currency",
                                currency: "VND",
                            });
                            $("#final-total").text(formattedFinalTotal);
                        },
                        error: function (xhr, status, error) {
                            $.ajax({
                                url: "https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/fee",
                                type: "POST",
                                dataType: "json",
                                headers: {
                                    "Content-Type": "application/json",
                                    Token: "bf62d596-a73c-11ef-a251-d6361c4ed5e2",
                                    ShopId: 5469318,
                                },
                                data: JSON.stringify({
                                    service_id: 53322,
                                    insurance_value: total,
                                    from_district_id: 3440,
                                    from_ward_code: "13010",
                                    to_district_id: toDistrictId,
                                    to_ward_code: toWardCode,
                                    weight: 1000,
                                    height:15,
                                    length:15,
                                    width:15
                                }),
                                success: function (response) {
                                    const shippingFee = response.data.total;
                                    const formattedShippingFee = shippingFee.toLocaleString("vi-VN", {
                                        style: "currency",
                                        currency: "VND",
                                    });

                                    // Hiển thị phí vận chuyển
                                    $("#shipFee").val(shippingFee);
                                    $("#shippingFee").text(formattedShippingFee);

                                    // Tính tổng tiền cuối cùng và hiển thị
                                    const finalTotal = shippingFee + total; // Tổng tiền sau khi cộng phí vận chuyển
                                    const formattedFinalTotal = finalTotal.toLocaleString("vi-VN", {
                                        style: "currency",
                                        currency: "VND",
                                    });
                                    $("#final-total").text(formattedFinalTotal);
                                }
                            });
                        },
                    });
                },
            });
        }
    }
</script>


<script>
    function toggleCheckbox(element) {
        const checkbox = element.querySelector('input[type="checkbox"]');
        checkbox.checked = !checkbox.checked;
        element.classList.toggle('checked', checkbox.checked);
    }
</script>
<script>
    (function () {
        'use strict';

        // Fetch all forms with class 'needs-validation'
        var forms = document.querySelectorAll('.needs-validation');

        // Loop over forms and prevent submission if validation fails
        Array.prototype.slice.call(forms).forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                    showAlert("error", "Đã có lỗi xảy ra. Vui lòng kiểm tra lại.");
                }
                form.classList.add('was-validated');
            }, false);

            // Add 'change' event listener for all inputs to validate them dynamically
            var inputs = form.querySelectorAll('input');
            Array.prototype.slice.call(inputs).forEach(function (input) {
                input.addEventListener('change', function () {
                    if (input.checkValidity()) {
                        input.classList.remove('is-invalid');
                        input.classList.add('is-valid');
                    } else {
                        input.classList.remove('is-valid');
                        input.classList.add('is-invalid');
                        showAlert("error", "Dữ liệu không hợp lệ trong " + input.placeholder);
                    }
                });
            });
        });

        //thông báo
        function showAlert(type, message) {
            let alertElement;

            if (type === 'success') {
                alertElement = document.getElementById('successAlert');
                alertElement.querySelector('span').textContent = message; // Thiết lập nội dung thông báo thành công
                alertElement.style.display = 'block'; // Hiển thị thông báo thành công
            } else if (type === 'error') {
                alertElement = document.getElementById('alertMessage');
                alertElement.querySelector('#alertBody').textContent = message; // Thiết lập nội dung thông báo lỗi
                alertElement.style.display = 'block'; // Hiển thị thông báo lỗi
            }

            // Tự động ẩn thông báo sau 5 giây
            setTimeout(() => {
                if (alertElement) {
                    var bootstrapAlert = new bootstrap.Alert(alertElement);
                    bootstrapAlert.close();
                }
            }, 5000);
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Kiểm tra và ẩn thông báo thành công nếu có
            var successAlert = document.getElementById('successAlert');
            if (successAlert && successAlert.style.display !== 'none') {
                setTimeout(function () {
                    var bootstrapAlert = new bootstrap.Alert(successAlert);
                    bootstrapAlert.close();
                }, 5000);
            }
        });

    })();
</script>

<script>
    const btn_checkout = document.getElementById("btn_checkout");
    const form_checkout = document.getElementById("form_checkout");

    btn_checkout.addEventListener("click", () => {
        form_checkout.submit();
    })
</script>
</body>
</html>